<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/login.css" />
    <!-- font roboto -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- form signup -->
    <div class="signup">
      <div class="signup__container">
        <h1>Đăng Ký</h1>
        <form id="registerForm">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required>
        <br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>
        <br>
        <button type="submit">Đăng Ký</button>
    </form>
        <a href="login.html" class="signup__registerButton"
          >Đã có tài khoản</a
        >
      </div>
    </div>
   
  </body>
  <script src="../js/signup.js"></script>
  <script>
    // Kiểm tra username hợp lệ (không chứa số và ký tự đặc biệt)
function isValidUsername(username) {
    const usernameRegex = /^[a-zA-Z\s]+$/; // Chỉ chứa chữ cái và khoảng trắng
    return usernameRegex.test(username);
}

// Kiểm tra email hợp lệ (@gmail.com)
function isValidEmail(email) {
    const emailRegex = /^[a-zA-Z0-9._%+-]+@gmail\.com$/; // Email đuôi @gmail.com
    return emailRegex.test(email);
}

// Kiểm tra mật khẩu mạnh
function isStrongPassword(password) {
    if (password.length < 12) return false; // Đủ 12 ký tự
    if (password[0] !== password[0].toUpperCase()) return false; // Ký tự đầu viết hoa
    return true;
}

// Xử lý form đăng ký
$("#registerForm").on("submit", function (e) {
    e.preventDefault();

    const username = $("#username").val().trim();
    const email = $("#email").val().trim();
    const password = $("#password").val();

    // Kiểm tra điều kiện
    if (!isValidUsername(username)) {
        alert("Tên người dùng không được chứa số hoặc ký tự đặc biệt.");
        return;
    }
    if (!isValidEmail(email)) {
        alert("Email phải có đuôi @gmail.com.");
        return;
    }
    if (!isStrongPassword(password)) {
        alert("Mật khẩu phải có ít nhất 12 ký tự và bắt đầu bằng chữ viết hoa.");
        return;
    }

    // Lưu thông tin người dùng vào LocalStorage
    const user = { username, email, password };
    localStorage.setItem("user", JSON.stringify(user));

    alert("Đăng ký thành công!");
    window.location.href = "login.html"; // Chuyển hướng sang trang đăng nhập
});

// Xử lý form đăng nhập
$("#loginForm").on("submit", function (e) {
    e.preventDefault();

    const loginUsername = $("#loginUsername").val().trim();
    const loginPassword = $("#loginPassword").val();

    // Lấy thông tin người dùng từ LocalStorage
    const user = JSON.parse(localStorage.getItem("user"));

    if (!user) {
        alert("Tài khoản không tồn tại. Vui lòng đăng ký.");
        return;
    }

    // Kiểm tra thông tin đăng nhập
    if (user.username === loginUsername && user.password === loginPassword) {
        alert("Đăng nhập thành công!");
        // Chuyển đến trang chính (nếu có)
        window.location.href = "dashboard.html"; // Tùy chỉnh đường dẫn
    } else {
        alert("Username hoặc mật khẩu không đúng. Vui lòng thử lại.");
    }
});
  </script>
</html>
